<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <title>Admin - Galeri Ekspresi ‚ù§Ô∏è</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <style>body { font-family: 'Poppins', sans-serif; background: #fcf8f4; }</style>
</head>
<body class="p-8">
    <div class="max-w-6xl mx-auto">
        <h1 class="text-4xl font-bold text-center text-[#a87e60] mb-10">Koleksi Senyum Si Doi</h1>
        
        <div id="video-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
            <p id="loading-text" class="text-center col-span-full">Sedang memuat kenangan...</p>
        </div>
    </div>

    <script>
        async function loadVideos() {
            try {
                const response = await fetch('/api/get-videos');
                const videos = await response.json();
                
                const container = document.getElementById('video-container');
                const loadingText = document.getElementById('loading-text');
                
                if (videos.length === 0) {
                    loadingText.innerText = "Belum ada rekaman yang tersimpan. üòä";
                    return;
                }

                loadingText.classList.add('hidden');

                videos.forEach(vid => {
                    const date = new Date(vid.created_at).toLocaleString('id-ID');
                    const card = document.createElement('div');
                    card.className = "bg-white p-4 rounded-3xl shadow-lg border border-orange-100";
                    
                    card.innerHTML = `
                        <video src="${vid.video_base64}" controls class="w-full rounded-2xl mb-4 shadow-inner"></video>
                        <div class="px-2">
                            <p class="text-sm text-gray-500">ID Rekaman: #${vid.id}</p>
                            <p class="text-md font-semibold text-gray-700">${date}</p>
                        </div>
                    `;
                    container.appendChild(card);
                });
            } catch (error) {
                console.error("Gagal memuat video:", error);
                document.getElementById('loading-text').innerText = "Gagal menyambung ke server.";
            }
        }

        loadVideos();
    </script>
</body>
</html>